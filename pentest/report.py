import re
import sys
import links
from typing import List


def find_emails(text: str) -> List[str]:

    result = re.findall(r"([-.A-Za-z]+@[-.A-Za-z]+\.\w+)", text, re.MULTILINE)
    return result


if __name__ == '__main__':
    if len(sys.argv) != 2:
        print("Please provide an e-mail address as a second argument")
        sys.exit(1)
    start_url = sys.argv[1]
    pages = links.get_all_pages(start_url)
    emails_lists = [find_emails(page) for page in pages.values()]
    emails = [email for emails in emails_lists for email in emails]

    print("Report: ")
    print("Found urls: \n")

    for url in pages.keys():
        print(url)

    print("\nFound emails: ")
    for email in emails:
        print(email)
